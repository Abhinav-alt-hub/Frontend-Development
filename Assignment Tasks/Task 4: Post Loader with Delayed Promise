<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Post Loader</title>
<style>
body {
    font-family: Arial;
    padding: 20px;
}
#loadBtn, #retryBtn {
    padding: 10px 20px;
    background: black;
    color: white;
    border: none;
    cursor: pointer;
}
#retryBtn {
    display: none;
    margin-top: 10px;
}
ul {
    padding-left: 20px;
}
</style>
</head>

<body>

<h2>Post Loader with Delayed Promise</h2>

<button id="loadBtn">Load Posts</button>
<button id="retryBtn">Retry</button>

<p id="status"></p>
<ul id="postList"></ul>

<script>
function loadPosts() {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            const fail = Math.random() < 0.3;
            if (fail) reject("Failed to load posts");
            else resolve([
                "How to learn JavaScript",
                "Understanding Promises",
                "DOM Manipulation Tips",
                "Async/Await Guide",
                "Building Web Apps"
            ]);
        }, 2000);
    });
}

async function fetchPosts() {
    status.textContent = "Loading posts...";
    retryBtn.style.display = "none";
    postList.innerHTML = "";

    try {
        const posts = await loadPosts();
        status.textContent = "";
        posts.forEach(p => {
            const li = document.createElement("li");
            li.textContent = p;
            postList.appendChild(li);
        });
    } catch (err) {
        status.textContent = err;
        retryBtn.style.display = "inline-block";
    }
}

loadBtn.onclick = fetchPosts;
retryBtn.onclick = fetchPosts;
</script>

</body>
</html>
